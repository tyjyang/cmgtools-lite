# name of new variable/collection : definition : regular expression for processes to apply it to
#
# && abs(Muon_dz)< 0.2
#  && GenPart_genPartIdxMother >= 0 # not needed
bareMuons : GenPart_status == 1 && (GenPart_statusFlags & 1) && abs(GenPart_pdgId) == 13 : W|Z
bareMuonsPlus : bareMuons && GenPart_pdgId < 0 : W|Z
bareMuonsMinus : bareMuons && GenPart_pdgId > 0 : W|Z
goodTrigObjs : goodMuonTriggerCandidate(TrigObj_id,TrigObj_pt,TrigObj_l1pt,TrigObj_l2pt,TrigObj_filterBits)
basicTrackAll : Track_pt > 15 && Track_charge > 0
basicTrack : Track_pt > 15 && Track_charge > 0 && Track_trackOriginalAlgo != 13 && Track_trackOriginalAlgo != 14
basicTrackAnyCharge : Track_pt > 15 && Track_trackOriginalAlgo != 13 && Track_trackOriginalAlgo != 14
basicMuon : Muon_pt > 15 && Muon_charge > 0
goodMuons_tracker : basicMuon && Muon_isTracker
goodMuons_global : basicMuon && Muon_isGlobal
goodMuons_standalone : Muon_standalonePt > 15 && Muon_isStandalone
vetoMuons : basicMuon && Muon_looseId && abs(Muon_eta) < 2.4 && abs(Muon_dxybs) < 0.05
goodMuons_accept : basicMuon && abs(Muon_eta) <= 2.4 && Muon_pt >= 26 && Muon_pt < 55
goodMuons_trackerOrGlobal : basicMuon && (Muon_isTracker || Muon_isGlobal)
goodMuons_trackerOrGlobalAnyCharge : Muon_pt > 15 && (Muon_isTracker || Muon_isGlobal)
goodMuons_trackerOrGlobalAndStandalone : goodMuons_trackerOrGlobal && goodMuons_standalone
basicTrack_matchedTrackerOrGlobal : basicTrack && matchDeltaR2(Track_eta,Track_phi,Muon_eta[goodMuons_trackerOrGlobal],Muon_phi[goodMuons_trackerOrGlobal],0.0001)
basicTrack_matchedTrackerOrGlobalAnyCharge : basicTrack && matchDeltaR2(Track_eta,Track_phi,Muon_eta[goodMuons_trackerOrGlobalAnyCharge],Muon_phi[goodMuons_trackerOrGlobalAnyCharge],0.0001)
basicTrackAll_matchedStandalone : basicTrackAll && matchDeltaR2(Track_eta,Track_phi,Muon_standaloneEta[goodMuons_standalone],Muon_standalonePhi[goodMuons_standalone],0.01)
basicTrack_matchedStandalone : basicTrack && matchDeltaR2(Track_eta,Track_phi,Muon_standaloneEta[goodMuons_standalone],Muon_standalonePhi[goodMuons_standalone],0.01)
standalone_matchedGlobal : goodMuons_standalone && matchDeltaR2(Muon_standaloneEta,Muon_standalonePhi,Muon_eta[goodMuons_global],Muon_phi[goodMuons_global],0.01)
standalone_isGlobal : goodMuons_standalone && Muon_isGlobal
goodMuons_idip : basicMuon && abs(Muon_dxybs) < 0.05 && Muon_mediumId > 0 && Muon_isGlobal
# for trigger can also add trigger bits
goodMuons_idipANDtrig : goodMuons_idip && hasTriggerMatch(Muon_eta,Muon_phi,TrigObj_eta[goodTrigObjs],TrigObj_phi[goodTrigObjs])
goodMuons_idipANDtrigANDiso  : goodMuons_idipANDtrig && Muon_pfRelIso04_all < 0.15
goodMuons_idipANDisonotrig  : goodMuons_idip && Muon_pfRelIso04_all < 0.15
goodMuons_trig : basicMuon && hasTriggerMatch(Muon_eta,Muon_phi,TrigObj_eta[goodTrigObjs],TrigObj_phi[goodTrigObjs])
goodMuons_iso  : basicMuon && Muon_pfRelIso04_all < 0.15

tagMuons : Muon_pt > 24 && Muon_charge < 0 && abs(Muon_eta) < 2.4 && abs(Muon_dxybs) < 0.05 && Muon_mediumId > 0 && Muon_isGlobal && Muon_pfRelIso04_all < 0.15 && hasTriggerMatch(Muon_eta,Muon_phi,TrigObj_eta[goodTrigObjs],TrigObj_phi[goodTrigObjs]) && minDeltaR2many(Muon_eta,Muon_phi,GenPart_eta[bareMuonsMinus][0],GenPart_phi[bareMuonsMinus][0]) < 0.01 

genTagMuons: bareMuonsMinus && abs(GenPart_eta) < 2.4 && GenPart_pt > 24
genTagMuons2p1: bareMuonsMinus && abs(GenPart_eta) < 2.1 && GenPart_pt > 24
